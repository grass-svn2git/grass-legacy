<H2>DESCRIPTION</H2>

<EM>r.out.mat</EM> will export a GRASS raster map to a MAT-File which can
be loaded into Matlab or Octave for plotting or further analysis. 
Attributes such as map title and bounds will also be exported into 
additional array variables.<BR>
<BR>
Specifically, the following array variables are created:<BR>
<ul>
  <li><b> map_data</b>
  <li><b> map_name</b>
  <li><b> map_title</b> (if it exists)
  <li><b> map_northern_edge</b>
  <li><b> map_southern_edge</b>
  <li><b> map_eastern_edge</b>
  <li><b> map_western_edge</b>
</ul>

<BR>
In addition, <EM>r.out.mat</EM> makes for a nice binary container format
for transferring georeferenced maps around, even if you don't use Matlab 
or Octave. 

<H2>NOTES</H2>

<EM>r.out.mat</EM> exports a Version 4 MAT-File. These files should 
successfully load into more modern versions of Matlab and Octave 
without any problems.<BR><BR>

Everything should be Endian safe, so the resultant file can be simply 
copied between different system architectures without binary translation.
<BR><BR>

As there is no IEEE value for NaN within integer maps, GRASS's null value 
is used to represent it for these maps. You'll have to do something 
like this to clean them once they are in Matlab:
<pre>    map_data(find(map_data < -1e9)) = NaN;</pre>

Null values in maps containing either floating point or double-precision 
floating point data should translate into NaN values as expected.<BR><BR>


<EM>r.out.mat</EM> must load the entire map into memory before writing, 
therefore it might have problems with <i>huge</i> maps.
(a 3000x4000 DCELL map uses about 100mb RAM)<BR><BR>

GRASS defines its map bounds at the outer-edge of the bounding cells, not 
the coodinates of their centroids. Thus, the following Matlab commands may 
be used to determine the map's resolution information:
<pre>    [rows cols] = size(map_data)
    x_range = map_eastern_edge - map_western_edge
    y_range = map_northern_edge - map_southern_edge
    ns_res = y_range/rows
    ew_res = x_range/cols
</pre>
<BR>

<H2>EXAMPLE</H2>

In Matlab, plot with either:
<pre>    imagesc(map_data), axis equal, axis tight, colorbar</pre>
or
<pre>    contourf(map_data, 24), axis ij, axis equal, axis tight, colorbar</pre>
<BR>

<H2>TODO</H2>

Add support for exporting map history, category information, color map, etc.
<BR>
Option to export as a version 5 MAT-File, with map and support information 
stored in a single structured array.

<H2>SEE ALSO</H2>

<i>
<a href="r.in.mat.html">r.in.mat</a><BR>
<a href="r.out.ascii.html">r.out.ascii</a><BR>
<a href="r.out.bin.html">r.out.bin</a><BR>
The <a href="http://www.octave.org">Octave</a> project
</i>


<H2>AUTHOR</H2>

Hamish Bowman<BR> <i>
Department of Marine Science<BR>
University of Otago<BR>
New Zealand</i><BR>

<BR>
<p><i>Last changed: $Date$</i>
