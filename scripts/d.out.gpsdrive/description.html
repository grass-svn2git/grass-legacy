<H2>DESCRIPTION</H2>

<EM>d.out.gpsdrive</EM> exports the current GRASS display monitor to a 
<A HREF="http://gpsdrive.kraftvoll.at">GpsDrive</a> compatible backdrop 
image and updates the GpsDrive image list with the appropriate geo-referencing
information.

<P>
<b><em>Use at your own risk. Do not use for navigation.
This software comes with absolutely no warranty.</em></b>


<P>
<H2>NOTES</H2>

Maps are saved in the user's <tt>~/.gpsdrive</tt> directory. Geo-referencing
information is added to the user's <tt>~/.gpsdrive/map_koord.txt</tt> file.
<P>

GpsDrive assumes northings are not rotated compared to true-geographic north.
If you are using a projection with significant curvature away from the central
meridian, or a map datum with a significant rotational component, then you will 
likely end up with a distorted or inexact background map!
Keeping the area small will lessen the error, but not eliminate it.
<P>
Best output is created from a Lat/Lon location or by keeping the output area
small (1:50,000). This translates to approx a 22.7km x 18.2km image window in the 
GIS. [<tt>x_ext=scale*(1280/2817.95)</tt>]
<P>
For your convenience (calculations are rough, but nominal):
<div class="code"><pre>
1:50,000 uses a region 22.7km x 18.2km.
1:75,000 uses a region 34.1km x 27.3km.
1:100,000 uses a region  45.4km x 36.3km.
1:175,000 uses a region  79.5km x 63.6km.
</pre></div>
<BR>


Maps exported from lat-lon locations will be given a "<tt>top_</tt>" prefix.
Maps exported from locations of other projections will be given a 
"<tt>map_</tt>" prefix. This is done so GpsDrive knows how to scale the 
image correctly.
<P>
GpsDrive requires backdrop images to be 1280x1024 pixels in size. While this
script takes care of that automatically, to avoid annoying bands on the sides
of your image you may want to set up your display monitor at half-scale (same
aspect ratio) and use d.zoom to select the full frame. For example:
<P>
<div class="code"><pre>
export GRASS_WIDTH=640
export GRASS_HEIGHT=512
d.mon x0
</pre></div>

<BR>
Map scaling is set from the region settings so should work correctly even 
when the display's aspect ratio does not match that of the output image.
<P>
It may be desirable to create a series of image tiles covering a large area.
An easy way to do this is to run <em>d.out.gpsdrive</em> in a shell loop.
Here are some ideas to get you started: (contribution of full code welcome!)
<P>
<div class="code"><pre>
#get region width and height (in map units)
eval `g.region -ge`

# shift the region by that amount
g.region e=e+$ew_extent w=w+$ew_extent
d.out.gpsdrive tile_${i}_${j}
i=`expr $i + 1`
etc.
</pre></div>

<BR>
To get a smoother transition between backdrop maps it may be better to create tiles
which overlap every half or 2/3's of the region's extent:
<P>
<div class="code"><pre>
ew_extent2=`echo $ew_extent | awk '{printf("%f", $1 / 2. )}'`
g.region e=e+$ew_extent2 w=w+$ew_extent2
</pre></div>

<BR><BR>
<H2>SEE ALSO</H2>

<EM><A HREF="d.info.html">d.info</A></EM>,
<EM><A HREF="d.grid.html">d.grid</A></EM>,
<EM><A HREF="d.out.file.html">d.out.file</A></EM>,
<EM><A HREF="d.out.png.html">d.out.png</A></EM>,
<EM><A HREF="d.save.html">d.save</A></EM>,
<EM><A HREF="g.region.html">g.region</A></EM>,
<EM><A HREF="v.in.garmin.html">v.in.garmin</A></EM>
<BR><BR>
The GRASS <A HREF="pngdriver.html">PNG driver</A><BR>

The <A HREF="http://gpsdrive.kraftvoll.at">GpsDrive</a> project<BR>
The <A HREF="http://gpsd.berlios.de">gpsd</a> personal GPS server project
<BR><BR>

<H2>AUTHOR</H2>
Hamish Bowman<BR> <i>
Department of Marine Science<BR>
University of Otago<BR>
New Zealand</i><BR>
<BR>

<p><i>Last changed: $Date$</i>
