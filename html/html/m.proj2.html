<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<TITLE>m.proj2</TITLE>
</head>

<body bgcolor="white">
<img src="grass.smlogo.gif">
<hr width="100%" align=center size=6 noshade>

<H2>NAME</H2>

<EM><b>m.proj2</b></EM>  - Calculates conversion coordinates for geographic
positions.

<BR>

<EM>(GRASS Map Development Program)</EM>


<H2>SYNOPSIS</H2>
<b>m.proj2</b><br>
<b>m.proj2 help</b><br>
<b>m.proj2</b> [<b>-i</b>] [<b>-o</b>] [<b>-d</b>] 
    [<b>input</b>=<em>name</em>] [<b>output</b>=<em>name</em>]
    [<b>inproj</b>=<em>name[,name,...]</em>]
    [<b>outproj</b>=<em>name[,name,...]</em>]
<p>

<H3>Flags:</H3>
<DL>
<DT><b>-i </b> 
<DD>Use WGS84 as input and current location as output projection
<DT><b>-o </b> 
<DD>Use current location as input and WGS84 as output projection
<DT><b>-d </b> 
<DD>Output lat/long in decimal degrees
<DD>
</DL>

<H3>Parameters:</H3>
<DL>
<DT><B>input</B>
<DD>Input coordinate file
<DT><B>output</B>
<DD>Output coordinate file
<DT><B>inproj</B>
<DD>Comma separated input projection parameters
<DT><B>outproj</B>
<DD>Comma separated output projection parameters
<DD>
</DL>


<H2>DESCRIPTION</H2> 

This program allows a user to (optionally interactively) convert coordinates
from one projection to another. It allows a user to take coordinates from
one file, convert them, and then write the results to another file.
Alternatively, if the <b>input=</b> and/or <b>output=</b> options are omitted, 
eastings and northings may be passed to the program from stdin and results 
sent to stdout. In this way <em>m.proj2</em> can be used as a simple 
replacement for the <a href="http://www.remotesensing.org/gdal">PROJ.4</a>
<em>cs2cs</em> program, especially when used with the <b>-i</b> or <b>-o</b> 
flags. Be sure to send it the <em>x</em> value first, i.e.,
"longitude&nbsp;latitude".
<P>

Note:  The program does not transform GRASS files, it is designed to
determine coordinate values on an individual position or list of positions.
Use <A HREF="s.proj.html">s.proj</A>, <A HREF="v.proj.html">v.proj</A>, and
<A HREF="r.proj.html">r.proj</A> to reproject GRASS maps.

<P>

<!-- ***I'm pretty sure the following is outdated & wrong ***  HB 7/2004
The map projections currently supported are listed in the 
$GISBASE/etc/projections file.
<BR>
<P>
Each of the above projections (with the exception of State Plane) can be
computed with the spheroids listed in the $GISBASE/etc/ellipse.table file.<BR>
<P>

<H2>INPUT FILE FORMAT</H2>
<DL>
<DT>When reading from a file of LATITUDE/LONGITUDE data the
file will contain three (2) columns of information:

<DD>the first column - latitude   - in degrees minutes seconds,
<DD>the second column - longitude - in degrees minutes seconds,
</DL>

<P>
For example:
<PRE>
	+40 36 31.4563	-87 2 7.8193	
	40n 36 31.4563	87w 2 7.8193
</PRE>
<BR>
<P>
<DL>
<DT>When reading from a file of PROJECTION COORDINATES data the
file will contain three (2) columns of information:
<DD>the first column - easting - ground coordinates
<DD>the second column - northing - ground coordinates
</DL>
<P>
For example:
<PRE>
 	 500000.00	4496918.64	
	-424489.11	1908736.13

</PRE>
<P>
-->

<H2>USAGE EXAMPLES</H2>

To convert a WGS84 lat/long coordinate to the current map projection:
<PRE>
    GRASS:~ > echo "170.510125 -45.868537" | <B>m.proj2 -i</B>
    Assuming LL WGS84 as input, current projection as output.
    2316540.779291 5479191.917030
</PRE><BR>
<P>

To convert a list of WGS84 lat/long GPS coordinates in a text file (including 
any attributes) into a GRASS sites file in the current map projection:
<PRE>
    GRASS:~ > cat waypoints.txt | <B>m.proj2 -i</B> | <B>s.in.ascii</B> sitesfile
</PRE><BR>
<P>

To convert all coordinates from a sites file in the current projection
to WGS84 lat/long, with output in decimal form:
<PRE>
    GRASS:~ > <B>s.out.ascii -a</B> sitesfile | <B>m.proj2 -od</B>
</PRE><BR>
<P><BR>

To transform points from a UTM projection into the
Gauss-Kr&uuml;ger Grid System, importing and exporting to files:
<PRE>
    GRASS:~ > <b>m.proj2 inproj</b>="proj=utm,name=utm,a=6378137.0,es=0.006694380,\
    zone=32,unfact=1.0" <b>outproj</b>="proj=tmerc,name=tmerc,\
    a=6377397.155,es=0.0066743720,lat_0=0.0,lon_0=9.0,k=1.0,\
    x_0=3500000.0" <b>input</b>=utm.coord <b>output</b>=new.gk.coord
</PRE>
<P><BR>

Projection parameters provided in the above case: "proj"
 (projection type), "name" (projection name), "a" (ellipsoid: equatorial
 radius), "es" (ellipsoid: eccentricity squared), "zone" (zone for the
area), "unfact" (conversion factor from meters to other units, e.g. feet),
"lat_0" (standard parallel), "lon_0" (central meridian), "k" (scale
factor) and "x_0" (false easting). Sometimes false northing is needed which
is coded as "y_0". Internally, the underlying 
<a href="http://www.remotesensing.org/proj/">PROJ.4 projection library</a>
performs an inverse projection to latitude-longitude and then projects the 
coordinate list to the target projection.


<P><BR>
<B>Note:</B> NO column headings are required, just the numbers.


<p>Datum conversions are automatically handled by the PROJ.4 library, if 'datum='
is specified in <em>both</em> the input <em>and</em> output projections on the
command line. (N.B. When using the command interactively, the user will
not be asked for a datum, and datum transformation will <em>not</em> take
place.)</p>

<p>If a datum is specified there is no need for the 'ellps=' or underlying
parameters, 'a=', 'es=' etc.</p>
<BR>
<p><strong>Another Usage example:</strong>
<pre>
    GRASS:~ > <B>m.proj2 inproj</B>="proj=tmerc,datum=ire65,lat_0=53.5,lon_0=-8,x_0=200000,\
    y_0=250000,k=1.000035" <B>outproj</B>="proj=ll,datum=wgs84" <B>input</B>=test.txt
</pre>
or without datum transformation:
<pre>
    GRASS:~ > <B>m.proj2 inproj</B>="proj=tmerc,ellps=modif_airy,lat_0=53.5,lon_0=-8,x_0=200000,\
    y_0=250000,k=1.000035" <B>outproj</B>="proj=ll,datum=wgs84" <B>input</B>=test.txt
</pre>
In this example no datum transformation will take place as a datum was not
specified for the input projection. The datum specified for the output
projection will thus be silently ignored and may be left out; all that is
achieved a simple conversion from projected to geodetic co-ordinates,
keeping the same datum (and thus also the same ellipsoid).</p>

<p>For more usage examples, see documentation for the 
<a href="http://www.remotesensing.org/proj/">PROJ.4</a> 'cs2cs' program.</p>


<h2>BUGS</h2> 

Please report any you find. Projection and datum support has been drastically
changed (for the better) in recent versions of GRASS.

<h2>References:</h2>
[1] Evenden, G.I.  (1990) Cartographic projection procedures for
the UNIX environment - a user's manual.  USGS Open-File Report 90-284
(Also see Interim Report and 2nd Interim Report on Release 4, Evenden 1994).  
<P>
[2] <a href="http://www.remotesensing.org/proj/">PROJ.4</a> software

<H2>SEE ALSO</H2>

<EM>
<A HREF="m.proj.html">m.proj</A>,
<A HREF="s.proj.html">s.proj</A>,
<A HREF="v.proj.html">v.proj</A>,
<A HREF="r.proj.html">r.proj</A>,
<A HREF="g.projinfo.html">g.projinfo</A>,
<A HREF="g.setproj.html">g.setproj</A>,
<A HREF="i.rectify.html">i.rectify</A>,
<A HREF="i.rectify3.html">i.rectify3</A>
</EM>

<H2>AUTHORS</H2>

Bob Covill, code based on m.proj<BR>
Updates by Paul Kelly and Hamish Bowman

<p><i>Last changed: $Date$</i>
</body>
</html>
