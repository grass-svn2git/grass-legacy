<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<TITLE>d.nviz</TITLE>

<body bgcolor="white">
<img src="grass.smlogo.gif">
<hr width="100%" align=center size=6 noshade>

<H2>NAME</H2>

<EM><b>d.nviz</b></EM>  - Creates a fly-through script to run
in NVIZ.

<BR>

<EM>(GRASS display Program)</EM>

<H2>SYNOPSIS</H2>

<B>d.nviz</B>
<BR>
<br>
<B>d.nviz help</B>
<BR>
<B>d.nviz [-i] [-f] [-c] [-k] [-o] [-e] </B> <B>input</B>=<EM>name</EM> 
<B>output</B>=<EM>name</EM> <B>name</B>=<EM>name</EM> <B>dist</B>=<EM>value</EM> 
<B>ht</B>=<EM>value</EM> <B>frames</B>=<EM>value</EM> <B>start</B>=<EM>value</EM>
<B>route</B>=<EM>east</EM>,<EM>north</EM>[,<EM>east</EM>,<EM>north</EM>,<EM>east</EM>,<EM>north</EM>,...]


<H2>DESCRIPTION</H2>
The <EM>d.nviz</EM> program allows the user to easily create a script that can be run in NVIZ to fly through a terrain.
The NVIZ flight path can be chosen interactively from the GRASS monitor (<EM>-i</EM>) or supplied on the command line as comma separated coordinates. The program optionally allows a KeyFrame file to created (after running the script). This KeyFrame file can be loaded into the <EM>Keyframe Animation</EM> panel for fine tuning or editting.
<p>
The script generated by <EM>d.nviz</EM> can be run from the NVIZ command line (nviz script=script_name) or after NVIZ is started by selecting <EM>Scripting->Play Script</EM>.

<H2>OPTIONS</H2>

<H3>Flags:</H3>
<DL>
<DT><B>-i</B>
<DD>Intercative mode
<DD>The user selects the camera path from the GRASS monitor by clicking the left mouse button along the route. Click the right mouse button to finish.
<DT><B>-f</B>
<DD>Full render
<DD>The script will draw all loaded NVIZ data and save scene to PPM image.
<DT><B>-c</B>
<DD>Flay at constant elevation
<DD>With this flag the camera will be set to an elevation given by the <EM>ht=</EM> parameter. The default is to fly at <EM>ht=</EM> above the topography (i.e. camera height = elevation + ht)
<DT><B>-k</B>
<DD>Output KeyFrame file
<DD>Generate a KeyFrame file that can be loaded from the NVIZ <EM>Keyframe Animation</EM> panel. The KeyFrame file is automatically assigned the script name with a <EM>.kanimator</EM> extension.
<DT><B>-o</B>
<DD>Render the animation in an off-screen context
<DT><B>-e</B>
<DD>Enable vector and sites drawing
</DL>


<H3>Parameters:</H3>
<DL>
<DT><B>input</B>
<DD>The name of the GRASS raster file with elevation data. 
<DD>This should be the same file that will be loaded in NVIZ.

<DT><B>output</B>
<DD>The name of the NVIZ script to create.

<DT><B>name</B>
<DD>The prefix for output images if running in full render mode (<EM>-f</EM>).
<DD>The defulat preifix is NVIZ (eg. NVIZ0000.ppm).

<DT><B>dist</B>
<DD>The distance of the camera behind the center of view.

<DT><B>ht</B>
<DD>The height of the camera above the center of view.
<DD>If the the <EM>-c</EM> flag is set, the height represents the actual camera height.

<DT><B>frames</B>
<DD>The number of frames in the animation.

<DT><B>start</B>
<DD>The starting frame number (default = 0).
<DD> This option may be useful in full render mode when creating an animation in sections. For example the user may wish to start at frame number 2000.

<DT><B>route</B>
<DD>The comma seperated geographic coordinates for keyframe locations.
<DD>The interactive flag (<EM>-i</EM>) overrides this option.

</DL>

<H2>EXAMPLE</H2>
To interactively create an NVIZ animation from raster elev.rast with 500 frames and the camera set to
50 meters above and 250 meters behind the scene, run the following:
<PRE>
d.nviz -ik input=elev.rast output=nviz.script dist=250 ht=50 frames=500
</PRE>
In the above the example the user is prompted to select the route from the GRASS monitor.
The output script, nviz.script, can then be run in NVIZ.


<H2>NOTES / HINTS</H2>
The user must select at least four key-frame locations (points) otherwise an error is generated.
<p>
If the GRASS region is changed the <EM>d.nviz</EM> command must be re-run.
<p>
The current GRASS region and the user supplied paramters are included as a comment at the top of the output script. 
This information can be used to easily re-create the animation.
<p>
The camera position is calculated backwards from the supplied position(s). 
It is possible that the camera position will lie outside the current window, in which case a non-fatal error is generated (Error: selected point is outside region).
This error can result in jerky movements during the animation.
To correct this problem reduce the <EM>dist=</EM> parameter or increase the current region.



<H2>SEE ALSO</H2>

<EM><A HREF="nviz.html">nviz</A></EM>

<H2>AUTHOR</H2>
<A HREF=mailto:bcovill@tekmap.ns.ca>Bob Covill</A>
<p><i>Last changed: $Date$</i>
</body>
</html>
