### DEFINITIONS

PYTHONVERSION=@PYVERSION@

### END DEFINITIONS

MODULE_TOPDIR = ../../..

include $(MODULE_TOPDIR)/include/Make/Lib.make
include $(MODULE_TOPDIR)/include/Make/Doxygen.make

SWIG=swig

CFLAGS=-c -fpic -I/usr/include/python$(PYTHONVERSION) -I./ -I$(ARCH_DISTDIR)/include `wx-config --cxxflags` `gdal-config --cflags`

LDFLAGS=-shared -fpic -L$(ARCH_LIBDIR) -lgrass_vect -lgrass_gis `wx-config --libs` -L./ -lgdi

default: grass6_wxvdigit.so

clean:
	-rm -f *.o _grass6_wxvdigit.so grass6_wxvdigit_wrap.cxx grass6_wxvdigit.py grass6_wxvdigit.i grass6_wxvdigit.pyc	 

grass6_wxvdigit.i:
	cat ./digit.i > grass6_wxvdigit.i
	echo "/* auto-generate swig typedef file (with some GRASS functions removed) */" >> grass6_wxvdigit.i
	cat ./driver.h >> grass6_wxvdigit.i
	cat ./digit.h >> grass6_wxvdigit.i

grass6_wxvdigit_wrap.cxx: grass6_wxvdigit.i
	$(SWIG) -c++ -python -shadow $<

grass6_wxvdigit_wrap.o: grass6_wxvdigit_wrap.cxx
	$(CXX) $(CFLAGS) $(INCLUDE_DIRS) $<

driver.o: driver.cpp driver.h
	$(CXX) $(CFLAGS) $(INCLUDE_DIRS) $<

digit.o: digit.cpp digit.h
	$(CXX) $(CFLAGS) $(INCLUDE_DIRS) $<

cats.o: cats.cpp digit.h
	$(CXX) $(CFLAGS) $(INCLUDE_DIRS) $<

line.o: line.cpp digit.h
	$(CXX) $(CFLAGS) $(INCLUDE_DIRS) $<

grass6_wxvdigit.so: grass6_wxvdigit_wrap.o driver.o digit.o cats.o line.o
	$(CXX) $(LDFLAGS) grass6_wxvdigit_wrap.o driver.o digit.o cats.o line.o -o _grass6_wxvdigit.so
