/*! \page Vector_Library GRASS 6.0 Vector Architecture

by GRASS Development Team

http://grass.itc.it

\section intro Introduction

This description covers the new GRASS 5.7/6.0 vector library
architecture.  This new architecture overcomes the vector limitations
of GRASS 4.x-5.4.x by extending the vector support with attributes
stored in external relational databases and by new 3D
capabilities. Besides internal file based storage the geometry may
alternatively be stored in PostGIS database. This enables users to
maintain large data sets with simultaneous write access. External GIS
formats such as SHAPE-files may be used directly without necessity of
format conversion.

\section background Background

generally, the vector data model is used to describe geographic
phenomena which may be represented by geometric entities (primitives)
like points, lines, and areas. The GRASS vector data model includes
the description of topology, where besides the coordinates -
describing the location of the points, lines, boundaries and centroids
- also their spatial relations are stored. In general, topological GIS
require a data structure where common boundary between two adjacent
areas is stored as a single line, simplifying the map maintenance.

\section libraries Libraries

Besides internal library functions there are two main libraries:


\subsection vlib Vlib (Vector library)

For details please read Blazek et al. 2002 (see below) as well as the
references in this document.

\subsubsection vlibspidx Vector library categories and layers

<P>
<i>Note: "layer" was called "field" in earlier version.</i>
<P>

In GRASS a "category" is a feature ID used to link geometry
with attributes stored in one or many (external) database table(s).
Each vector feature inside a vector map has zero, one or more
&lt;layer,category&gt; tuple(s). A user can (but not must) create attribute
tables which are referenced by the layer, and rows which are essentially
referenced by the &lt;layer,category&gt; pair.

\subsubsection vlibspidx Vector library spatial index management

Spatial index (based on R-tree) is calculated on the fly.

Spatial index occupies a lot of memory but it is necessary for 
topology building. Also, it takes long time to release the memory
occupied by spatial index (dig_spidx_free()). 

The function building topology (Vect_build()) is usually called 
at the end of module (before Vect_close()) so it is faster to call
exit() and operating system releases all the memory much faster.
By default the memory is not released.

It is possible to call Vect_set_release_support() before Vect_close()
to enforce memory release, but it takes long time on large files.

Currently most of the modules do not release the memory occupied for
spatial index and work like this (pseudocode):

\verbatim
int 
main
{
     Vect_open_new()
     //writing new vector

     Vect_build()
     Vect_close()  // memory is not released
}
\endverbatim

In general it is possible to free the memory with Vect_set_release_support()
such as:

\verbatim
int 
main
{
     Vect_open_new()
     // writing new vector

     Vect_build()
     Vect_set_release_support()
     Vect_close()  // memory is released
}
\endverbatim

but it only takes longer time. 
<P>
It make sense to release spatial index if it is used only at the beginning
of a module or in permanently running programs like QGIS.
For example:

\verbatim
int 
main
{
     Vect_open_old()
     // select features using spatial index, e.g.  Vect_select_lines_by_box()
     Vect_set_release_support()
     Vect_close()  // memory is released

     // do some processing which needs memory
}
\endverbatim


\subsubsection vlibtopo Vector library topology management

Topology is generated for all kinds of vector types.  Memory is not
released by default. The programmer can force the library to release
the memory by using Vect_set_release_support(). But: The programmer
cannot run Vect_set_release_support() in mid process because all
vectors are needed in the spatial index is needed to build topology.

Topology is also necessary for points in case of vector network
because the graph is built using topology informations about lines
and points.

The topology structure does not only store the topology but also
'line' bounding box and line offset in coor file (index).
The existing spatial index is using line ID in 'topology' structure
to identify lines in 'coor' file. Currently it is not possile to build
spatial index without topology.

\subsubsection vlibtopo_coor coor file

<ol>
<li> In the coor file the following is stored: 'line' (element) type,
    number of attributes and layer number for each category.
<li> Coordinates in binary file are stored as double (8 bytes).
</ol>

\subsubsection vlibtin Vector TINs

TINs are created as 2D/3D vector polygons consisting of 3 vertices.


\subsubsection vlibfunc List of vector library functions

The Vect_*() functions are the programmer's API for GRASS vector
programming. See details here:


<a class="qindex" href="modules.html">Structured Vect_*() functions list</a>


\subsection dglib DGLib (Directed Graph Library)

The Directed Graph Library or DGLib (Micarelli 2002,
http://grass.itc.it/dglib/) provides functionality for vector network
analysis. This library released under GPL is hosted by the GRASS project (in
the CVS server within the GRASS source code). As stand-alone library it
may also be used by other software project.

The Directed Graph Library library provides functionality to assign costs to
lines and/or nodes. That means that costs can be accumulated while traveling
along polylines. The user can assign individual costs to all lines and/or
nodes of a vector map and later calculate shortest path connections based on
the accumulated costs. Applications are transport analysis, connectivity and
more. 

For details please read Blazek et al. 2002 (see below).



\section contacts Contacts

 Radim Blazek (vector architecture) <blazek@itc.it>

 Roberto Micarelli (DGLib) <mi.ro@iol.it>

\section references References

Text based on: R. Blazek, M. Neteler, and R. Micarelli. The new GRASS 5.1
 vector architecture. In Open source GIS - GRASS users conference 2002,
 Trento, Italy, 11-13 September 2002. University of Trento, Italy, 2002.
 <a href="http://www.ing.unitn.it/~grass/conferences/GRASS2002/proceedings/proceedings/pdfs/Blazek_Radim.pdf">http://www.ing.unitn.it/~grass/conferences/GRASS2002/proceedings/proceedings/pdfs/Blazek_Radim.pdf</a>
 

\section seealso See Also

DBMI - Database Management Interface: \ref DataBase_Management_Interface

Last change: $Date$
*/
