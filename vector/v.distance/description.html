<H2>DESCRIPTION</H2>

<EM>v.distance</EM>
finds features from one vector (from=) feature to another vector (to=) nearest feature.
Various information about relation (distance, ...) may be uploaded to attribute
table attached to first vector map or printed to 'stdout'.
A new vector map may be created where lines connecting nearest points on features are written.
<P>


<h2>EXAMPLES</H2>

1) Find <B>nearest lines</B> in vector map <B>ln</B> for points from vector map
<B>pnt</B> within the given threshold and write related line categories to
column <B>linecat</B> in attribute table attached to vector map <B>pnt</B>:
<br>
<div class="code"><pre>
v.distance from=pnt to=ln upload=cat column=linecat
</pre></div>

<p>
2) For each point from vector map <B>pnt</B> find <B>nearest area</B> from map
<B>ar</B> within the given threshold and write the related area categories
to column <B>areacat</B> in attribute table attached to vector map
<B>pnt</B>. In case a point falls into a polygon area, the distance is zero:
<br>
<div class="code"><pre>
v.distance from=pnt to=ar upload=cat column=areacat
</pre></div>

<p>
3) Create a new vector map which contains <B>lines connecting nearest
features</B> of maps <B>pnt</B> and map <B>ln</B>. The resulting vector map
can be used for example to connect points to a network as needed for
network analysis:
<br>
<div class="code"><pre>
v.distance -p from=pnt to=ln out=connections upload=dist column=dist
</pre></div>

<p>
4) Query information from selected point(s). v.distance takes points from 
   vector as input instead of stdin. First new vector map with query points, 
   has to be created, then the map can be analysed:
<br>   
Create query map (if not present):<br>
<div class="code"><pre>
echo "123456|654321|1" | v.in.ascii output=pnt
</pre></div>
<br>
Find nearest features:<br>
<div class="code"><pre>
v.distance from=pnt to=map_to_query upload=cat col=somecol -p
</pre></div>

<p>
5) Point-in-polygon: Find <B>area</B> from vector map <B>ar</B> for each point 
from vector map <B>pnt</B> in which the individual point falls into and write
the related area categories to column <B>areacat</B> into attribute table 
attached to vector map <B>pnt</B>:
<br>
<div class="code"><pre>
v.distance from=pnt to=ar dmax=0 upload=cat column=areacat
</pre></div>

<p>
6) Univariate statistics on results: Create a vector map containing connecting
lines and investigate mean distance to targets.<br>
An alternative solution is to use the <tt>v.distance upload=dist</tt> option 
to upload distances into the <i>bugs</i> vector directly, then run v.univar 
on that. Also note you can  upload two columns at a time.<BR>
e.g. <tt>v.distance upload=cat,dist column=nearest_id,dist_to_nr</tt>
<br>
<div class="code"><pre>
# create working copy
g.copy vect=bugsites,bugs

# add new attribute column to hold nearest archsite category number
v.db.addcol map=bugs column="nrst_arch INTEGER"

v.distance from=bugs to=archsites to_type=point upload=to_attr \
  to_column=cat column=nrst_arch out=vdistance_vectors_raw

# we need to give the lines category numbers, create a table, and create
#  a column in that table to hold the distance data.
v.category vdistance_vectors_raw out=vdistance_vectors type=line op=add
g.remove v=vdistance_vectors_raw

v.db.addtable map=vdistance_vectors column="length DOUBLE"
v.to.db map=vdistance_vectors option=length column=length

# calculcate statistics. Use v.univar.sh for extended statistics.
v.univar vdistance_vectors column=length
</pre></div>


<H2>NOTES</H2>
If a nearest feature does not have a category, column is updated to <B>null</B>.
This is true also for areas, which means for example, that if point is in island
(area WITHOUT category), v.distance does not search for nearest area WITH category,
island is identified as nearest and category updated to null.
<p>
The upload <B>column</B>(s) must already exist. Create one with <em>v.db.addcol</em>.

<H2>SEE ALSO</H2>

<EM>
<a href="r.distance.html">r.distance</a>,
<a href="v.db.addcol.html">v.db.addcol</a>,
<a href="v.what.vect.html">v.what.vect</a>
</EM>


<H2>AUTHOR</H2>

Janne Soimasuo 1994, Finland<br>
University of Joensuu, Faculty of Forestry, Finland
<p>
5.0 cmd line coordinates support: Markus Neteler, ITC-irst, Trento, Italy<BR>
<p>
5.1 update Radim Blazek, ITC-irst, Trento, Italy

<p><i>Last changed: $Date$</i>
