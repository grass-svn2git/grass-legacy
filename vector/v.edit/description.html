<h2>DESCRIPTION</h2>

<p>
<em>v.edit</em> allows the user to edit a vector map via Command Line
Interface. This can be very useful in scripts.
</p>

<p>
<em>v.edit</em> works only with "simple" vector features: points,
centroids, lines, boundaries. Currently, only 2D region is supported.

<p>
<em>v.edit</em> provide editing features' geometry. Attribute data connected
to the vector map are not modified. For this
purpose, <code>db.*</code> commands shall be used.
</p>

<p>
Vector features can be selected either by category number
<code>cats</code>, id's <code>id</code>, coordinates
<code>coords</code>, bounding box <code>bbox</code>, polygon
<code>polygon</code> or 'where' statement (attribute table)
<code>where</code>. Selecting features by coordinates is affected by
the current 2D resolution. It can be changed using threshold distance
<code>thresh</code>. These options are <em>orthogonal</em>, i.e. can
be used in various combinations. For example:
</p>

<div class="code"><pre>
v.edit map=roads tool=select coord=599505,4921010,603389.0625,4918292.1875 thresh=10000 where="label='interstate'"
</pre></div>

selects all features (and prints their id's to standard output)
covered by two bounding boxes (center at 599505,4921010 and
603389.0625,4918292.1875, size 2*10000) with attribute
label='interstate'.



<h2>NOTES</h2>
<p>
This module can be buggy, still under development. So please feel free
to report all bugs or wanted features. Also this manual page should be
updated.
</p>

<h2>USAGE</h2>

<h3>Feature selection</h3>

<p>
Vector features can be selected in several
ways:
</p>
<ul>
    <li><code>cats</code> - using category numbers</li>
    <li><code>ids</code> - using internal line id's</li>
    <li><code>coords</code> - using x,y coordinate pairs</li>
    <li><code>bbox</code> - using bounding box</li>
    <li><code>polygon</code> - using polygon (at least 3 coordinate pairs have to be set)</li>
    <li><code>where</code> - using 'where' statement (attribute table)
</ul>

<p>
Additional parameters for vector feature specification are:
</p>
<ul>
    <li><code>layer</code> - layer number</li>
    <li><code>thresh</code> - threshold distance used for selecting vector features by coordinates</li>
</ul>

<h3>Tool description</h3>

<ul>
    <li><code>create</code> - Create new (empty) vector map
    (see <code><a href="v.in.ascii.html">v.in.ascii</a>
    -e</code>). Optionally vector features (in GRASS ASCII format) can
    be read from standard input (<code>input=-</code>) or from the
    text file given by the <code>input</code> option, see also
    <code>add</code> tool.</li>

    <li><code>add</code> - Add new vector features (stored in GRASS
    ASCII format) to existing vector map. Features can be read
    from standard input or from the given text file
    (<code>input</code> option).

    <li><code>delete</code> - Delete selected vector features from
    existing vector map.</li>
   
    <li><code>copy</code> - Make identical copy of
    selected vector features.</li>

    <li><code>move</code> - Move selected features in existing vector
    map relatively to their current location. For this purpose, option
    <code>move</code> must be used. This option defines coordinates of
    the movement direction.</li>

    <li><code>flip</code> - Flip direction of selected vector lines
    (lines or boundaries).</li>

    <li><code>catadd</code> - Add new layer category(ies) to selected vector
    feature(s). Category can be later used for new database
    entry.</li>

    <li><code>catdel</code> - Delete layer category(ies) of selected vector
    feature(s).</li>

    <li><code>merge</code> - Merges all (at least two) selected vector lines
    (lines or boundaries). The nearest distance between start and end
    nodes of both lines is found. The second line from two selected
    lines can eventually be flipped in it's direction.</li>

    <li><code>break</code> - Split (break) given vector line into
    two on location given by
    <code>coords</code> </li>
    
    <li><code>snap</code> - Snap one vector line to another.</li>

    <li><code>vertexadd</code> - Add vertex to the given vector
    line(s). Location of the new vertex is given by <code>coord<code>
    option.</li>

    <li><code>vertexdel</code> - Remove vertex from given vector line(s)
    specified by <code>coords</code> option.</li>

    <li><code>vertexmove</code> - Move vertex(ces) specified
    by <code>coords</code> option. Direction of the movement is
    specified by the <code>move</code> option.</li>
    
    <li><code>select</code> - Print comma separated list of selected
      line ID's. No editing is done.
</ul>

<h2>EXAMPLES</h2>

<h3>Create new vector map</h3>
<p>
Create new <em>empty</em> vector map.
</p>
<div class="code"><pre>
v.edit tool=create map=vectmap
</pre></div>

<p>
Create new vector map and read data from file 'roads.txt' (i.e. create a copy of vector map 'roads', but without atribute data).
</p>
<div class="code"><pre>
v.out.ascii in=roads format=standard > roads.txt;
v.edit tool=create map=vectmap input=roads.txt
</pre></div>

<h3>Add new features to existing vector map</h3>

<p>
Add new features read from standard input.
</p>
<div class="code"><pre>
v.out.ascii in=railroads format=standard | v.edit tool=add map=vectmap
</pre></div>

<h3>Delete selected features from vector map</h3>

<p>
Remove all vector features with category 1 or 2.
</p>
<div class="code"><pre>
v.edit tool=delete map=roads cats=1,2
</pre></div>

<p>
Remove features with category 1 or 2 located on coordinates 600952.625,4926107 (bounding
box based on the current 2D resolution).
</p>
<div class="code"><pre>
g.region -d;
v.edit tool=delete map=roads cats=1,2 coords=600952.625,4926107
</pre></div>

<p>
Remove all features with category 1 and 2 covered by two bounding boxes (center coordinates 592542.892,4924766.996 and 603389.062,4918292.187, width 2000 map units).
</p>
<div class="code"><pre>
v.edit map=roads tool=delete coord=592542.892,4924766.996,603389.062,4918292.187 thresh=1000 cat=1,2
</pre></div>


<h3>Move features</h3>

<p>
Move feature (vector point) located on coordinates 602580,4918480 to
coordinates 603580,4919480.
</p>

<div class="code"><pre>
v.edit tool=move map=archsites coord=602580,4918480 th=1e-2 move=1000,1000
</pre></div>


<p>
Move all features with category 1 1000 map units to the west and 1000
map units to the south.
</p>

<div class="code"><pre>
v.edit tool=move map=roads cat=1 move=1000,-1000
</pre></div>

<p>
Move all features defined by bounding box
601530,4921560,602520,4922310 (W,S,E,N) 1000 map units to the
east and 1000 map units to the north
</p>

<div class="code"><pre>
v.edit tool=move map=roads bbox=601530,4921560,602520,4922310 move=-1000,1000
</pre></div>

<h3>Flip direction of vector lines</h3>

<p>
Flip direction of all vector lines.
</p>

<div class="code"><pre>
v.edit tool=flip map=streams cats=1-9999 type=line
</pre></div>

<h3>Add / delete layer category number</h3>

Add new layer/category 2/1,2/3,2/4,2/5 to features covered by given polygon.

<div class="code"><pre>
v.edit tool=catadd map=roads polygon=599877.75,4925088.375,597164.812,4922524.5,601338.562,4920914.625 layer=2 cat=1,3-5
</pre></div>

Delete layer/category 1/1, line id 1.
<div class="code"><pre>
v.edit tool=catdel map=roads id=1 cats=5
</pre></div>

<h3>Merge lines</h3>

<!--
<p>
Merge first line defined by coordinates 606853.875,4921332 with second
line defined by coordinates 603216.75,4922763. Define nearest
distance between line first and last points and move first (last)
point of second line to first line - first line will remain untouched.
</p>

<div class="code"><pre>
v.edit tool=merge map=vectmap coords=606853.875,4921332,603216.75,4922763 
</pre></div>

<p>
Merge all lines defined by the given bounding box
</p>

<div class="code"><pre>
v.edit tool=merge map=vectmap bbox=344556.23,23445.2345
</pre></div>

<p>
Merge two lines defined by category
</p>

<div class="code"><pre>
v.edit tool=merge map=vectmap cat=43,45
</pre></div>

-->

<h3>Break (split) lines</h3>
<!--
<p>
Split line on coordinates 344556.23,23445.2345.
</p>

<div class="code"><pre>
v.edit tool=split map=vectmap coords=344556.23,23445.2345
</pre></div>

<p>
Split line of category 45 at coords 345433.3,34567.32.
</p>

<div class="code"><pre>
v.edit tool=split map=vectmap cat=45 coords=345433.3,34567.32
</pre></div>
-->

<h3>Snap lines</h3>

<h3>Add vertex</h3>

<h3>Delete verteces</h3>

<!--
<p>
Remove vertex at coordinates 344556.23,23445.2345
</p>

<div class="code"><pre>
v.edit tool=straight map=vectmap coords=344556.23,23445.2345
</pre></div>
-->

<h3>Move verteces</h3>

<!--
<p>
Move vertex on coordinates 344556.23,23445.2345 to
545556.23,22445.2345
</p>

<div class="code"><pre>
v.edit tool=vertex map=vectmap coords=344556.23,23445.2345 move=1000,-1000
</pre></div>
-->

<h3>Select features and print their ID's</h3>

<p>
Print ID's of selected features, e.g.:
</p>

<div class="code"><pre>
v.edit map=soils@PERMANENT tool=select bbox=595733.8125,4919781.75,598536.1875,4917396.75
</pre></div>

Example with <em>d.vect</em>:

<div class="code"><pre>
d.erase;
d.vect roads;
d.vect -i map=roads cats=`v.edit map=roads tool=select coord=592542.89243878,4924766.99622811,603389.0625,4918292.1875 thresh=1000 --q` col=red
</pre></div>

<h2>SEE ALSO</h2>

<em>
<a HREF="databaseintro.html">Database editing tools</a><BR>
<a HREF="v.in.ascii.html">v.in.ascii</a><BR>
<a HREF="v.info.html">v.info</a><BR>
<a HREF="v.build.html">v.build</a><BR>
<a HREF="v.clean.html">v.clean</a><BR>
<a HREF="v.digit.html">v.digit</a><BR>
</em>
<a HREF="http://freegis.org/cgi-bin/viewcvs.cgi/~checkout~/grass6/doc/vector/vector.html#ascii">Vector ASCII Format Specification</a>

<h2>AUTHOR</h2>

Wolf Bergenheim - independent developer<br>
Jachym Cepicky, Department of Geoinformation Technologies, Mendel University of Agriculture and Forestry in Brno, Czech Republic<br>
Martin Landa, FBK-irst (formerly ITC-irst), Trento, Italy

<p><i>Last changed: $Date$</i>
